<!D    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justificaciones - Sintonía Política</title>
    <link rel="icon" type="image/x-icon" href="images/icon.ico">PE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justificaciones - Sintonía Política</title>
        <link rel="icon" type="image/x-icon" href="icon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/pages.css">
</head>
<body>
    <!-- Navbar para Justificaciones -->
    <nav class="results-navbar">
        <div class="navbar-content">
            <div class="navbar-logo">
                <img src="images/Logo SP-11.png" alt="Sintonía Política" class="logo-img">
            </div>
            <div class="navbar-links">
                <a href="mis-resultados.html" class="nav-link">Mis Resultados</a>
                <a href="index.html" class="nav-link">Volver al inicio</a>
            </div>
        </div>
    </nav>

    <div class="page-header">
        <h1 class="page-title">Justificaciones por Pregunta</h1>
        <p class="page-subtitle">
            Aquí puedes ver la posición de cada candidato para cada pregunta del test, 
            con colores que indican el nivel de acuerdo o desacuerdo.
        </p>
    </div>

    <div class="justifications-container">
        <div id="justifications-content">
            <!-- Las preguntas y posiciones se cargarán aquí dinámicamente -->
        </div>
    </div>

    <script src="scripts/data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            generateJustifications();
        });

        function showSurveyInfo() {
            alert('Esta es una encuesta independiente que busca ayudarte a conocer tu afinidad con las propuestas políticas de los candidatos presidenciales.');
        }

        function generateJustifications() {
            const container = document.getElementById('justifications-content');
            const { questions, candidates, candidateScores } = window.testData;

            // Verificar que los datos estén cargados
            if (!questions || !candidates || !candidateScores) {
                console.error('Error: No se pudieron cargar los datos');
                container.innerHTML = '<p>Error al cargar los datos. Por favor, recarga la página.</p>';
                return;
            }

            questions.forEach((question, questionIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-matrix';
                
                const questionTitle = document.createElement('div');
                questionTitle.className = 'question-title';
                questionTitle.innerHTML = `<strong>Pregunta ${questionIndex + 1}:</strong> ${question.text}`;
                
                const candidatesGrid = document.createElement('div');
                candidatesGrid.className = 'candidates-matrix';
                
                candidates.forEach((candidate, candidateIndex) => {
                    // Obtener la posición del candidato para esta pregunta
                    const position = candidateScores[candidateIndex] ? candidateScores[candidateIndex][questionIndex] : 0;
                    
                    const candidateDiv = document.createElement('div');
                    candidateDiv.className = `candidate-position position-${position}`;
                    
                    const positionTexts = {
                        '-2': 'Muy en desacuerdo',
                        '-1': 'En desacuerdo',
                        '0': 'Neutral',
                        '1': 'De acuerdo',
                        '2': 'Muy de acuerdo'
                    };
                    
                    candidateDiv.innerHTML = `
                        <div class="candidate-name">${candidate.name}</div>
                        <div class="position-text">${positionTexts[position] || 'Sin posición'}</div>
                    `;
                    
                    candidatesGrid.appendChild(candidateDiv);
                });
                
                questionDiv.appendChild(questionTitle);
                questionDiv.appendChild(candidatesGrid);
                container.appendChild(questionDiv);
            });
        }

        function getPositionText(position) {
            const texts = {
                '-2': 'Muy en desacuerdo',
                '-1': 'En desacuerdo',
                '0': 'Neutral',
                '1': 'De acuerdo',
                '2': 'Muy de acuerdo'
            };
            return texts[position] || 'Sin posición';
        }
    </script>
</body>
</html>
